
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Physarum &#8212; physarum  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="setup module" href="setup.html" />
    <link rel="prev" title="physarum package" href="physarum.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Physarum">
<h1>Physarum<a class="headerlink" href="#Physarum" title="Permalink to this headline">¶</a></h1>
<div class="section" id="by-Maximilian-Noichl">
<h2>by Maximilian Noichl<a class="headerlink" href="#by-Maximilian-Noichl" title="Permalink to this headline">¶</a></h2>
<p>This notebook implements a simple physarum-simulation in python, using numba. It’s heavily inspired by/derivative of work by <a class="reference external" href="https://sagejenson.com/physarum">Sage Jenson</a> and <a class="reference external" href="https://softologyblog.wordpress.com/2019/04/11/physarum-simulations/">Jason Rampe</a>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
<span class="kn">import</span> <span class="nn">physarum</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># standards:</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1"># image utils:</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="k">as</span> <span class="n">IMG</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span><span class="p">,</span> <span class="n">color</span>
<span class="kn">from</span> <span class="nn">skimage.transform</span> <span class="kn">import</span> <span class="n">rescale</span><span class="p">,</span> <span class="n">resize</span><span class="p">,</span> <span class="n">downscale_local_mean</span>
<span class="kn">import</span> <span class="nn">cv2</span> <span class="c1"># for rescaling</span>

<span class="c1"># for the blurring:</span>
<span class="kn">from</span> <span class="nn">scipy.ndimage.filters</span> <span class="kn">import</span> <span class="n">gaussian_filter</span><span class="p">,</span> <span class="n">uniform_filter</span>

<span class="c1"># to monitor progress:</span>
<span class="kn">import</span> <span class="nn">tqdm</span>

<span class="c1"># to save movies:</span>
<span class="kn">import</span> <span class="nn">imageio</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># for colormaps</span>
<span class="kn">import</span> <span class="nn">palettable</span>
<span class="kn">import</span> <span class="nn">cmocean</span>
<span class="kn">from</span> <span class="nn">colorsys</span> <span class="kn">import</span> <span class="n">hls_to_rgb</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cm</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span><span class="p">,</span> <span class="n">LinearSegmentedColormap</span>

<span class="c1"># to speed up computation</span>
<span class="kn">import</span> <span class="nn">numba</span>

<span class="c1"># noise for the starting-positions:</span>
<span class="kn">import</span> <span class="nn">noise</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">interpolate</span>
</pre></div>
</div>
</div>
<div class="section" id="Define-the-init-functions">
<h3>Define the init-functions<a class="headerlink" href="#Define-the-init-functions" title="Permalink to this headline">¶</a></h3>
<p>There are several ways to produce the starting positions for our particles. below I have implemented perlin and uniform noise as well as a circle. Each function returns an x,y-position pair, which we can stack later to combine multiple of them.</p>
</div>
<div class="section" id="Setting-up-the-colormap:">
<h3>Setting up the colormap:<a class="headerlink" href="#Setting-up-the-colormap:" title="Permalink to this headline">¶</a></h3>
<p>Here I choose a colormap, usually from cmocean or crameri’s scientific colormaps (implemented in <a class="reference external" href="https://jiffyclub.github.io/palettable">palettable</a>). There is also a bit of functionality to smoothly append an extra color to the front or the end of the colormap, e.g. for a dark background or specific highlights.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### # make_colormap([[0,90,50],[50,90,50],[100,90,50],[150,90,50],[200,90,50],[250,90,50],[300,90,50],[350,90,50]],alpha=False)</span>
<span class="n">species_a_color</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">make_colormap</span><span class="p">([[</span><span class="mi">220</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">10</span><span class="p">],[</span><span class="mi">40</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">50</span><span class="p">],[</span><span class="mi">16</span><span class="p">,</span><span class="mi">93</span><span class="p">,</span><span class="mi">35</span><span class="p">]],</span><span class="n">alpha_distribution</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">species_b_color</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">make_colormap</span><span class="p">([[</span><span class="mi">40</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">50</span><span class="p">],[</span><span class="mi">70</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">67</span><span class="p">],[</span><span class="mi">70</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">67</span><span class="p">],[</span><span class="mi">70</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">20</span><span class="p">]],</span><span class="n">alpha_distribution</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.8</span><span class="p">],</span> <span class="n">basecolor</span><span class="o">=</span> <span class="n">species_a_color</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="n">species_c_color</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">make_colormap</span><span class="p">([[</span><span class="mi">27</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">58</span><span class="p">],[</span><span class="mi">200</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">50</span><span class="p">],[</span><span class="mi">200</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">20</span><span class="p">]],</span><span class="n">alpha_distribution</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.8</span><span class="p">],</span> <span class="n">basecolor</span><span class="o">=</span> <span class="n">species_a_color</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>


</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_5_0.png" src="_images/examples_5_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_5_1.png" src="_images/examples_5_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_5_2.png" src="_images/examples_5_2.png" />
</div>
</div>
<p>I have implemented a few effects that we can use to introduce additional complexity into the behaviour of our agents: * walking noise * heartbeat * explosions</p>
<p>We set up the functions that determine, which values should be taken by the parameters over time. We can be very creative here, letting some values decay, others ebb and flow, and we can of course always keep them fixed by setting the function to a fixed value. We can also introduce a shifting amount of noise in the parameters, making particles wander aimlewssly for a certain period of time, before returning back on track.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">width</span> <span class="o">=</span> <span class="mi">1500</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">1500</span>
<span class="n">t</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="c1"># base_array = np.zeros((height,width))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">feed_list</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="c1">#     get_circle_init(n=20000, center=(1100,500),radius=200,width=30),</span>
<span class="c1">#            get_circle_init(n=20000, center=(750,750),radius=200,width=30),</span>
<span class="c1">#            get_filled_circle_init(n=20000, center=(700,350),radius=10),</span>
<span class="c1">#             get_filled_circle_init(n=20000, center=(550,700),radius=200),</span>
<span class="c1">#    physarum.get_gaussian_gradient(n=100000, center=(750,750),sigma=300),</span>
<span class="c1"># physarum.get_gaussian_gradient(n=100000, center=(500,999),sigma=100),</span>

 <span class="c1">#          physarum.get_circle_init(n=100000, center=(750,750),radius=200,width=30),</span>
        <span class="n">physarum</span><span class="o">.</span><span class="n">get_perlin_init</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">),</span> <span class="n">n</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
<span class="c1">#            get_circle_init(n=200000, center=(1000,1000),radius=150,width=100)</span>
<span class="c1">#     get_image_init(&#39;seed/johnson_overlay.png&#39;,shape = (width,height),n=20000)</span>
          <span class="p">]</span>

<span class="c1"># feed_list = feed_list + [get_filled_circle_init(n=20000, center=(np.random.randint(width),np.random.randint(height)),radius=np.random.randint(30,high=60)) for x in range(0,80)]</span>
<span class="n">feed_pattern</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">feed_list</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">feed_list</span><span class="p">])</span>
<span class="n">feed_pattern</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">feed_pattern</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">feeding_trace</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">leave_feeding_trace</span><span class="p">(</span><span class="n">feed_pattern</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span><span class="n">feed_pattern</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">),</span> <span class="n">trace_strength</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;wrap&#39;</span><span class="p">,</span><span class="n">truncate</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="c1"># feeding_trace = physarum.get_image_init_array(&#39;seed/gradient.png&#39;,shape = (width,height))</span>
<span class="c1"># feeding_trace =  (1-physarum.get_image_init_array(&#39;seed/maze.png&#39;,shape = (width,height)) *100000 -100000) + 100000*feeding_trace</span>

<span class="nb">print</span><span class="p">(</span><span class="n">feeding_trace</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Feeding Pattern:&#39;</span><span class="p">)</span>
<span class="n">physarum</span><span class="o">.</span><span class="n">plot_init_trace</span><span class="p">(</span><span class="n">feeding_trace</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">species_a_color</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0.20272437 0.19078383 0.16116802 ... 0.13654054 0.16893247 0.19408175]
 [0.17985417 0.16965339 0.14347358 ... 0.11608882 0.14735515 0.17128968]
 [0.14707256 0.13891646 0.11755905 ... 0.09252684 0.11930871 0.13964795]
 ...
 [0.22486059 0.20845515 0.17499273 ... 0.19334311 0.2083885  0.22272918]
 [0.22066786 0.20581055 0.17317882 ... 0.17272461 0.19598782 0.21557186]
 [0.21505022 0.20162994 0.17004505 ... 0.15452545 0.18406226 0.20761484]]
Feeding Pattern:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_9_1.png" src="_images/examples_9_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">physarum</span><span class="o">.</span><span class="n">get_image_init_array</span><span class="p">(</span><span class="s1">&#39;seed/maze.png&#39;</span><span class="p">,</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">))</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">a</span><span class="o">&gt;</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">mask</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[ True,  True,  True, ...,  True,  True,  True],
       [ True,  True,  True, ...,  True,  True,  True],
       [ True,  True,  True, ...,  True,  True,  True],
       ...,
       [ True,  True,  True, ...,  True,  True,  True],
       [ True,  True,  True, ...,  True,  True,  True],
       [ True,  True,  True, ...,  True,  True,  True]])
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#                                 initialization=[#get_circle_init(n=200000, center=(500,500),radius=200,width=10),</span>
<span class="c1"># #                                                 get_perlin_init(shape=[i-1 for i in base_array.shape], n=500000),</span>
<span class="c1"># #                                     physarum.get_uniform_init(n=100000,shape =(height,width)),</span>
<span class="c1"># #                                   physarum.get_gaussian_gradient(n=500000, center=(170,140),sigma=2),</span>
<span class="c1">#                                     physarum.get_filled_circle_init(n=400000, center=(500,500),radius=50),</span>
<span class="c1"># #                                     get_uniform_init(n=200000,shape = base_array.shape)</span>
<span class="c1"># #                                     physarum.get_image_init_positions(&#39;seed/paisley.jpg&#39;,shape = base_array.shape, n=300000, flip=True)</span>

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">species_a</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">physarum_population</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                                <span class="n">horizon_walk</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">horizon_sense</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                <span class="n">theta_walk</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">theta_sense</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span><span class="n">walk_range</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span>
                                <span class="n">colormap</span><span class="o">=</span><span class="n">species_a_color</span><span class="p">,</span>
                                <span class="n">social_behaviour</span> <span class="o">=-</span><span class="mi">16</span><span class="p">,</span><span class="n">trace_strength</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="n">initialization</span><span class="o">=</span><span class="c1">#[ physarum.get_uniform_init(n=400000,shape =(height,width))]</span>
<span class="c1">#                                          [physarum.get_filled_circle_init(n=20000, center=(np.random.randint(width),np.random.randint(height)),radius=np.random.randint(30,high=60)) for x in range(0,20)]</span>
                                         <span class="p">[</span><span class="n">physarum</span><span class="o">.</span><span class="n">get_filled_circle_init</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">750</span><span class="p">,</span><span class="mi">750</span><span class="p">),</span><span class="n">radius</span><span class="o">=</span><span class="mi">200</span><span class="p">),</span>
<span class="c1"># #                                                physarum.get_uniform_init(n=40000,shape =(height,width))</span>
                                        <span class="p">],</span><span class="n">template</span> <span class="o">=</span> <span class="n">feeding_trace</span><span class="p">,</span><span class="n">template_strength</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>


<span class="n">species_b</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">physarum_population</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                                <span class="n">horizon_walk</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="n">horizon_sense</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                <span class="n">theta_walk</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">theta_sense</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span><span class="n">walk_range</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],</span>
                                <span class="n">colormap</span><span class="o">=</span><span class="n">species_b_color</span><span class="p">,</span>
                                <span class="n">social_behaviour</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">trace_strength</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="n">initialization</span><span class="o">=</span> <span class="c1">#[ physarum.get_uniform_init(n=400000,shape =(height,width))]</span>
                                         <span class="p">[</span><span class="n">physarum</span><span class="o">.</span><span class="n">get_filled_circle_init</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">20000</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">width</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">height</span><span class="p">)),</span><span class="n">radius</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="n">high</span><span class="o">=</span><span class="mi">120</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">)]</span>
<span class="c1">#                                          [physarum.get_filled_circle_init(n=400000, center=(750,750),radius=200),</span>
<span class="c1"># #                                                physarum.get_uniform_init(n=40000,shape =(height,width))</span>
<span class="c1">#                                                ],</span>
                                        <span class="p">)</span><span class="c1"># ,template = feeding_trace,template_strength=[0,0,-10,0,0])#,template = feeding_trace,template_strength=0)</span>

<span class="n">species_c</span> <span class="o">=</span> <span class="n">physarum</span><span class="o">.</span><span class="n">physarum_population</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                                <span class="n">horizon_walk</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">horizon_sense</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                <span class="n">theta_walk</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">theta_sense</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span>
                                <span class="n">social_behaviour</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span> <span class="p">,</span><span class="n">trace_strength</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">colormap</span><span class="o">=</span><span class="n">species_c_color</span><span class="p">,</span>
                                <span class="n">initialization</span><span class="o">=</span><span class="p">[</span><span class="n">physarum</span><span class="o">.</span><span class="n">get_filled_circle_init</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">20000</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">width</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">height</span><span class="p">)),</span><span class="n">radius</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="n">high</span><span class="o">=</span><span class="mi">40</span><span class="p">))]</span>
                                            <span class="p">)</span>

                                                <span class="c1">#                                         )</span>
<span class="c1">#                                          [</span>
<span class="c1">#                                     physarum.get_uniform_init(n=400000,shape =(height,width)),</span>
<span class="c1">#                                         physarum.get_filled_circle_init(n=300000, center=(500,500),radius=300),</span>
<span class="c1">#                                     physarum.get_circle_init(n=200000, center=(500,500),radius=400,width=8),</span>
<span class="c1">#                                     get_perlin_init(shape=[i-1 for i in base_array.shape], n=400000),</span>
<span class="c1">#                                physarum.get_image_init_positions(&#39;seed/paisley.jpg&#39;,shape = base_array.shape, n=300000, flip=True)</span>
<span class="c1">#                                 ])#,template = feeding_trace,template_strength=10)</span>

<span class="c1"># species_d = physarum_population(height=height,width=width,</span>
<span class="c1">#                                horizon_walk=2.,horizon_sense=15.,</span>
<span class="c1">#                                 theta_walk=15.,theta_sense=10.,</span>
<span class="c1">#                                 social_behaviour = 6 ,trace_strength = 0.3,350</span>
<span class="c1">#                                 explosion_radius=40.,explosion_proneness=0.000001,colormap=species_d_color,</span>
<span class="c1">#                                 initialization=[</span>
<span class="c1">#                                     get_perlin_init(shape=[i-1 for i in base_array.shape], n=200000, scale = .4, octaves = 10.,</span>
<span class="c1">#                                     persistence = 0.2, lacunarity = 2,adjust_brightness=3),</span>
<span class="c1"># #                                     get_uniform_init(n=100000,shape = base_array.shape),</span>
<span class="c1"># #                                     get_circle_init(n=100000, center=(625,625),radius=200,width=10)</span>
<span class="c1">#                                 ])#,template = feeding_trace)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\noich\OneDrive\Desktop\Untitled Folder\physarum.py:133: FutureWarning: elementwise comparison failed; returning scalar instead, but in the future will perform elementwise comparison
  # Add changing walking-array
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># !black physarum.py</span>
<span class="c1"># !pip install -U Sphinx</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Collecting Sphinx
  Downloading Sphinx-3.3.1-py3-none-any.whl (2.9 MB)
Requirement already satisfied, skipping upgrade: babel&gt;=1.3 in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (2.8.0)
Requirement already satisfied, skipping upgrade: sphinxcontrib-serializinghtml in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.1.3)
Requirement already satisfied, skipping upgrade: imagesize in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.2.0)
Requirement already satisfied, skipping upgrade: sphinxcontrib-applehelp in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.0.1)
Requirement already satisfied, skipping upgrade: requests&gt;=2.5.0 in c:\users\noich\appdata\roaming\python\python37\site-packages (from Sphinx) (2.24.0)
Requirement already satisfied, skipping upgrade: setuptools in c:\users\noich\appdata\roaming\python\python37\site-packages (from Sphinx) (49.1.0)
Requirement already satisfied, skipping upgrade: Jinja2&gt;=2.3 in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (2.11.1)
Requirement already satisfied, skipping upgrade: sphinxcontrib-htmlhelp in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.0.2)
Requirement already satisfied, skipping upgrade: sphinxcontrib-jsmath in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.0.1)
Requirement already satisfied, skipping upgrade: Pygments&gt;=2.0 in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (2.5.2)
Requirement already satisfied, skipping upgrade: snowballstemmer&gt;=1.1 in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (2.0.0)
Requirement already satisfied, skipping upgrade: sphinxcontrib-devhelp in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.0.1)
Requirement already satisfied, skipping upgrade: packaging in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (20.1)
Requirement already satisfied, skipping upgrade: docutils&gt;=0.12 in c:\users\noich\appdata\roaming\python\python37\site-packages (from Sphinx) (0.15.2)
Requirement already satisfied, skipping upgrade: alabaster&lt;0.8,&gt;=0.7 in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (0.7.12)
Requirement already satisfied, skipping upgrade: colorama&gt;=0.3.5; sys_platform == &#34;win32&#34; in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (0.4.3)
Requirement already satisfied, skipping upgrade: sphinxcontrib-qthelp in c:\users\noich\anaconda3\lib\site-packages (from Sphinx) (1.0.2)
Requirement already satisfied, skipping upgrade: pytz&gt;=2015.7 in c:\users\noich\anaconda3\lib\site-packages (from babel&gt;=1.3-&gt;Sphinx) (2019.3)
Requirement already satisfied, skipping upgrade: chardet&lt;4,&gt;=3.0.2 in c:\users\noich\appdata\roaming\python\python37\site-packages (from requests&gt;=2.5.0-&gt;Sphinx) (3.0.4)
Requirement already satisfied, skipping upgrade: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in c:\users\noich\appdata\roaming\python\python37\site-packages (from requests&gt;=2.5.0-&gt;Sphinx) (1.25.9)
Requirement already satisfied, skipping upgrade: idna&lt;3,&gt;=2.5 in c:\users\noich\appdata\roaming\python\python37\site-packages (from requests&gt;=2.5.0-&gt;Sphinx) (2.10)
Requirement already satisfied, skipping upgrade: certifi&gt;=2017.4.17 in c:\users\noich\appdata\roaming\python\python37\site-packages (from requests&gt;=2.5.0-&gt;Sphinx) (2020.6.20)
Requirement already satisfied, skipping upgrade: MarkupSafe&gt;=0.23 in c:\users\noich\anaconda3\lib\site-packages (from Jinja2&gt;=2.3-&gt;Sphinx) (1.1.1)
Requirement already satisfied, skipping upgrade: six in c:\users\noich\appdata\roaming\python\python37\site-packages (from packaging-&gt;Sphinx) (1.15.0)
Requirement already satisfied, skipping upgrade: pyparsing&gt;=2.0.2 in c:\users\noich\appdata\roaming\python\python37\site-packages (from packaging-&gt;Sphinx) (2.4.7)
Installing collected packages: Sphinx
  Attempting uninstall: Sphinx
    Found existing installation: Sphinx 1.7.5
    Uninstalling Sphinx-1.7.5:
      Successfully uninstalled Sphinx-1.7.5
Successfully installed Sphinx-3.3.1
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
ERROR: spyder 4.0.1 requires pyqt5&lt;5.13; python_version &gt;= &#34;3&#34;, which is not installed.
ERROR: spyder 4.0.1 requires pyqtwebengine&lt;5.13; python_version &gt;= &#34;3&#34;, which is not installed.
ERROR: cdlib 0.1.8 has requirement networkx&lt;2.4,&gt;=2.2, but you&#39;ll have networkx 2.5 which is incompatible.
ERROR: cdlib 0.1.8 has requirement python-louvain==0.13, but you&#39;ll have python-louvain 0.9 which is incompatible.
ERROR: cdlib 0.1.8 has requirement sphinx==1.7.5, but you&#39;ll have sphinx 3.3.1 which is incompatible.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>

<span></span><span class="n">species_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">species_a</span><span class="p">,</span><span class="n">species_b</span><span class="p">]</span><span class="c1">#,species_c]</span>
<span class="n">images</span><span class="o">=</span><span class="p">[]</span>
<span class="n">physarum</span><span class="o">.</span><span class="n">run_physarum_simulation</span><span class="p">(</span><span class="n">populations</span> <span class="o">=</span> <span class="n">species_list</span><span class="p">,</span> <span class="n">image_list</span><span class="o">=</span><span class="n">images</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "6f4a7333d1704e6cb1baafd991920e55", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 0
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_2.png" src="_images/examples_14_2.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 20
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_4.png" src="_images/examples_14_4.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 40
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_6.png" src="_images/examples_14_6.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 60
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_8.png" src="_images/examples_14_8.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 80
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_10.png" src="_images/examples_14_10.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 100
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_12.png" src="_images/examples_14_12.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 120
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_14.png" src="_images/examples_14_14.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 140
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_16.png" src="_images/examples_14_16.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 160
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_18.png" src="_images/examples_14_18.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 180
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_20.png" src="_images/examples_14_20.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 200
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_22.png" src="_images/examples_14_22.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 220
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_24.png" src="_images/examples_14_24.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 240
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_26.png" src="_images/examples_14_26.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 260
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_28.png" src="_images/examples_14_28.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Step No.: 280
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_14_30.png" src="_images/examples_14_30.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-29-a78c3fbcbb38&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">      1</span> species_list <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>species_a<span class="ansi-yellow-intense-fg ansi-bold">,</span>species_b<span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-red-intense-fg ansi-bold">#,species_c]</span>
<span class="ansi-green-fg">      2</span> images<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-yellow-intense-fg ansi-bold">]</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 3</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>physarum<span class="ansi-yellow-intense-fg ansi-bold">.</span>run_physarum_simulation<span class="ansi-yellow-intense-fg ansi-bold">(</span>populations <span class="ansi-yellow-intense-fg ansi-bold">=</span> species_list<span class="ansi-yellow-intense-fg ansi-bold">,</span> image_list<span class="ansi-yellow-intense-fg ansi-bold">=</span>images<span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">~\OneDrive\Desktop\Untitled Folder\physarum.py</span> in <span class="ansi-cyan-fg">run_physarum_simulation</span><span class="ansi-blue-intense-fg ansi-bold">(populations, image_list, additive_trace, diffusion, mask, cmap_rescaling, decay, show_image_every, img_rescale)</span>
<span class="ansi-green-fg">    445</span>
<span class="ansi-green-fg">    446</span>             im <span class="ansi-yellow-intense-fg ansi-bold">=</span> this_species<span class="ansi-yellow-intense-fg ansi-bold">.</span>colormap<span class="ansi-yellow-intense-fg ansi-bold">(</span>im<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 447</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>im <span class="ansi-yellow-intense-fg ansi-bold">=</span> np<span class="ansi-yellow-intense-fg ansi-bold">.</span>uint8<span class="ansi-yellow-intense-fg ansi-bold">(</span>im <span class="ansi-yellow-intense-fg ansi-bold">*</span> <span class="ansi-cyan-intense-fg ansi-bold">255</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    448</span>             im <span class="ansi-yellow-intense-fg ansi-bold">=</span> IMG<span class="ansi-yellow-intense-fg ansi-bold">.</span>fromarray<span class="ansi-yellow-intense-fg ansi-bold">(</span>im<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>convert<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-blue-intense-fg ansi-bold">&#34;RGBA&#34;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    449</span>

<span class="ansi-red-intense-fg ansi-bold">KeyboardInterrupt</span>:
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">images</span>

<span class="c1"># save favorite moments, (This should be of a &#39;frames to include-kind&#39; )</span>

<span class="n">physarum</span><span class="o">.</span><span class="n">save_film</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
IMAGEIO FFMPEG_WRITER WARNING: input image is not divisible by macro_block_size=16, resizing from (1500, 1500) to (1504, 1504) to ensure video compatibility with most codecs and players. To prevent resizing, make your input image divisible by the macro_block_size or set the macro_block_size to 1 (risking incompatibility).
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># physarum.save_grid(images, folder=&#39;physarum_tiles/&#39;)</span>
<span class="n">physarum</span><span class="o">.</span><span class="n">save_single_image_grid</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">image_no</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="s1">&#39;physarum_tiles/&#39;</span><span class="p">,</span><span class="n">dimensions</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/examples_16_0.png" src="_images/examples_16_0.png" />
</div>
</div>
</div>
<div class="section" id="Saving-of-our-film">
<h3>Saving of our film<a class="headerlink" href="#Saving-of-our-film" title="Permalink to this headline">¶</a></h3>
<p>We write the list of PIL-images we have created, either as a mp4 or as a gif. I like to give each file an automated time-stamp name, so I don’t have to write something new while experimenting.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># create image-bar:</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">images_to_use</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="n">n</span><span class="p">)]</span>


<span class="n">images_to_use</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)])</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">images_to_use</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">images_to_use</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># make borders:</span>
<span class="n">borders</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">images_to_use</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">borders</span><span class="p">)</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">images_to_use</span><span class="p">))</span>
<span class="n">result</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">images_to_use</span>
<span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">borders</span>
<span class="c1"># im = np.uint8(im * 255)</span>

<span class="n">tile_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="n">image_collection</span> <span class="o">=</span> <span class="n">IMG</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">(</span><span class="n">tile_array</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">image_collection</span><span class="p">)</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="c1"># current date and time</span>
<span class="n">date_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m-</span><span class="si">%d</span><span class="s2">-%Y--%H-%M-%S&quot;</span><span class="p">)</span>
<span class="n">image_collection</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;physarum_tiles/&quot;</span><span class="o">+</span><span class="n">date_time</span><span class="o">+</span><span class="s2">&quot;.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">IndexError</span>                                Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-13-f57bd28293fc&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">      4</span>
<span class="ansi-green-fg">      5</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 6</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>images_to_use <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>np<span class="ansi-yellow-intense-fg ansi-bold">.</span>array<span class="ansi-yellow-intense-fg ansi-bold">(</span>images<span class="ansi-yellow-intense-fg ansi-bold">[</span>int<span class="ansi-yellow-intense-fg ansi-bold">(</span>s<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-green-intense-fg ansi-bold">for</span> s <span class="ansi-green-intense-fg ansi-bold">in</span> images_to_use<span class="ansi-yellow-intense-fg ansi-bold">]</span>
<span class="ansi-green-fg">      7</span> print<span class="ansi-yellow-intense-fg ansi-bold">(</span>images_to_use<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>shape<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">      8</span> <span class="ansi-red-intense-fg ansi-bold"># make borders:</span>

<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-13-f57bd28293fc&gt;</span> in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-intense-fg ansi-bold">(.0)</span>
<span class="ansi-green-fg">      4</span>
<span class="ansi-green-fg">      5</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 6</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>images_to_use <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>np<span class="ansi-yellow-intense-fg ansi-bold">.</span>array<span class="ansi-yellow-intense-fg ansi-bold">(</span>images<span class="ansi-yellow-intense-fg ansi-bold">[</span>int<span class="ansi-yellow-intense-fg ansi-bold">(</span>s<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-green-intense-fg ansi-bold">for</span> s <span class="ansi-green-intense-fg ansi-bold">in</span> images_to_use<span class="ansi-yellow-intense-fg ansi-bold">]</span>
<span class="ansi-green-fg">      7</span> print<span class="ansi-yellow-intense-fg ansi-bold">(</span>images_to_use<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>shape<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">      8</span> <span class="ansi-red-intense-fg ansi-bold"># make borders:</span>

<span class="ansi-red-intense-fg ansi-bold">IndexError</span>: list index out of range
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>

<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">physarum</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="physarum.html">physarum package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Physarum</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#by-Maximilian-Noichl">by Maximilian Noichl</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Define-the-init-functions">Define the init-functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Setting-up-the-colormap:">Setting up the colormap:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Saving-of-our-film">Saving of our film</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">setup module</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="physarum.html" title="previous chapter">physarum package</a></li>
      <li>Next: <a href="setup.html" title="next chapter">setup module</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Maximilian Noichl.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/examples.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>